!function(t,e,n){"use strict";var r,i,s,o,a,h,l,c,u,p,d,f,v,g,m,y,b,x,C,N,E,w,$,A;!function(){var t=Object.prototype.toString,e=function(e){return"string"==typeof e||"[object String]"===t.call(e)},n=Array.isArray||function(e){return"[object Array]"===t.call(e)},i=function(t){return"function"==typeof t},s=function(e){return e?"[object Object]"===t.call(e):!1};r={isFunction:i,isArray:n,isString:e,isPlainObject:s}}();!function(){var t=function(e,n,i){for(var s in n)if(n.hasOwnProperty(s)){var o,a=n[s];i&&r.isPlainObject(a)&&r.isPlainObject(o=e[s])?t(o,a,i):e[s]=a}};i=t}();!function(){var e=t.setTimeout;s=function(t){e(t,0)}}();o=function(t){s(function(){throw t.logDetails&&t.logDetails(),t})};!function(){var t=[],e=!1,n=function(t,e,n){for(;t.length>0;){var r=t.shift();try{r.apply(n,e)}catch(i){o(i)}}},r=function(){e=!0;try{n(t,[])}finally{e=!1}},i=function(n){0!==t.length||e||s(r),t.push(n)};a={syncTick:r,nextTick:i,nextTickApply:function(t,e,r){t&&t.length>0&&i(function(){n(t,e,r)})},syncApply:n}}();!function(){var t=r.isFunction,e=Array.prototype.concat,n=function(e,n,r){if(e){var i=e.thenSync||e.then;if(t(i))return i.call(e,n,r),void 0}n(e)},s=function(t,e){return function(){try{var r=t.apply(null,arguments);n(r,e.resolve,e.reject)}catch(i){e.reject(i)}finally{t=null,e=null}}},l=function(){},c=function(){var t=new l,n=new l,r="pending",s=null,o={},h=function(t,i,h){var l=function(i,a){n[t+i]=function(){var t;return"pending"===r?(t=o[h]||[],o[h]=e.apply(t,arguments)):r===h&&(t=e.apply([],arguments),a(t,s)),this}};l("",a.nextTickApply),l("Sync",a.syncApply),n[i]=function(){if("pending"===r){s=arguments,r=h;var t=o[h];o=null,a.nextTickApply(t,s)}}};return h("done","resolve","resolved"),h("fail","reject","rejected"),n.state=function(){return r},n.promise=function(){return n},i(t,n),t},u=c.prototype=l.prototype={end:function(){return this.thenSync(c.empty,o)}},p=function(e){var n="done"+e,r="fail"+e;u["then"+e]=function(e,i){var o=c();return this[n](t(e)?s(e,o):o.resolve),this[r](t(i)?s(i,o):o.reject),o.promise()},u["always"+e]=function(){return this[n].apply(this,arguments),this[r].apply(this,arguments),this}};p("Sync"),p("");var d=c();d.resolve(),c.done=d.promise(),c.empty=function(){},c.noop=function(){return d};var f=function(t,e){return function(n){if(t){var r=t.array;if(r[e]=n,t.counter--,!t.counter){var i=t.promise;t.array=null,t.promise=null,i.resolve.apply(i,r)}t=null}}};c.when=function(){var t=e.apply([],arguments);if(!t.length)return c.done;for(var r=c(),i=r.reject,s={promise:r,counter:t.length,array:t},o=0,a=t.length;a>o;o++)n(t[o],f(s,o),i);return r.promise()},h=c}();l=n;!function(){var t,e=0,n=function(){var t=!1,e=this,n=r().thenSync(function(n){return n.call(e,t)});return t=!0,n},r=function(){if(!t){var e=l().errorContext,n=new E(e);t=n.moduleExecute(n.getModule(e.main))}return t},i=function(t,r,i){var s=++e,o=new Error("NoderError #"+s+": "+t);return o.name="NoderError",o.id=s,o.code=t,o.args=r,o.cause=i,o.logDetails=n,o};c=i}();!function(){var e,n=t.XMLHttpRequest;n?e=function(){return new n}:(n=t.ActiveXObject,e=function(){return new n("Microsoft.XMLHTTP")});var r=function(t,e,n){return function(){if(e&&4==e.readyState){var r=200!=e.status;r?n.reject(c("XMLHttpRequest",[t,e])):n.resolve(e.responseText,e),t=e=n=null}}};u=function(t,n){n=n||{};var i=h(),s=e(),o=n.headers||{};s.open(n.method||"GET",t,!n.sync);for(var a in o)o.hasOwnProperty(a)&&s.setRequestHeader(a,o[a]);return s.onreadystatechange=r(t,s,i),s.send(n.data),i.promise()}}();!function(){var t,n=function(n,r){var i={};return n=r?["/*\n * File: ",r,"\n */\narguments[1].res=",n,"\n//",t?"#":"@"," sourceURL=",r].join(""):"arguments[1].res="+n,e(n,i),i.res};t=n("/*@cc_on!@*/0"),p=n}();d=function(t,e,n){try{return p(t,e)}catch(r){throw c("jsEval",[t,e,n],r)}};!function(){var t=r.isPlainObject;f=function(e,n,r){if(!e)return r;r=e["**"]||r;for(var i=0,s=n.length;s>i;i++){var o=n[i],a=e[o];if(!a)return e["*"]||e["**"]||r;if(!t(a))return a;r=e["**"]||r,e=a}return e["."]||e["*"]||e["**"]||r}}();!function(){var t=function(t){return t.length?t.split("/"):[]},e=function(e){var n=t(e);return n.pop(),n.join("/")};v={split:t,dirname:e}}();!function(){var e=t.document||{},n=function(){if("loading"==e.readyState||"interactive"==e.readyState){var t=e.getElementsByTagName("script"),n=t[t.length-1];if(n&&n.src)return n}};g=e.currentScript||n()||{}}();m=function(){var t=g.src;return t?v.dirname(t.replace(/\?.*$/,""))+"/":""};!function(){var t=v.split,e={},n=function(t){var n=t.config.packaging||e;this.config=n,this.baseUrl=(n.baseUrl||"").replace(/^%scriptdir%\//,m()),this.context=t,this.currentLoads={};var r=n.bootstrap;r&&r(t.define)},r=n.prototype={};r.moduleLoad=function(n){var r,i=n.filename,s=this.config.packagesMap;if(s){var o=t(i);r=f(s||e,o,null)}return r?this.loadPackaged(r):this.loadUnpackaged(n)},r.loadUnpackaged=function(t){var e=t.filename,n=this.baseUrl+e,r=this.context;return u(n,this.config.requestConfig).thenSync(function(t){r.jsModuleDefine(t,e,n)}).always(function(){r=null})},r.loadPackaged=function(t){var e=this,n=e.baseUrl+t,r=e.currentLoads[n];return r||(e.currentLoads[n]=r=u(n,e.config.requestConfig).thenSync(function(t){var r=e.jsPackageEval(t,n);r(e.context.define)}).always(function(){delete e.currentLoads[n],e=null})),r},r.jsPackageEval=function(t,e){var n=["(function(define){\n",t,"\n})"];return d(n.join(""),e,1)},y=n}();!function(){var t=r.isString,e=v.split,n={},i=function(t){var e=t.length-1,n=t[e];-1==n.indexOf(".")&&(t[e]=n+".js")},s=function(t){for(var e=0,n=t.length;n>e;e++){var r=t[e];r.length&&"."!=r?".."==r&&e>0&&".."!=t[e-1]&&(t.splice(e-1,2),e-=2,n-=2):(t.splice(e,1),e--,n--)}return t},o=function(t,n,r){var i=e(n);i[0].length?i.unshift(r,1):(i.shift(),i.unshift(0,r+1)),t.splice.apply(t,i)},a=function(e,n){for(var r=0,i=n.length;i>r;r++){var s=n[r];if(e=e[s],!e||s===e)return!1;if(t(e))return o(n,e,r),!0}return o(n,e["."]||"index.js",n.length),!0},h=function(t,e){var n={},r=".";s(e);for(var i=e.join("/");i!==r;){if(".."==e[0])throw c("resolverRoot",[e]);if(n[i])throw c("resolverLoop",[e]);n[i]=r,a(t,e)&&s(e),r=i,i=e.join("/")}},l=function(t){this.config=t.config.resolver||n,this.cache={}},u=l.prototype={};u.moduleResolve=function(t,r){var s=e(t.filename),o=this.config["default"]||n,a=e(r),l=a[0];return("."===l||".."===l)&&(s.pop(),a=s.concat(a)),h(o,a),i(a),a.join("/")},b=l}();!function(){var e,n=function(){var e=t.document;if(!e||"complete"===e.readyState)return h.done;var n=h(),r=function(){n&&n.resolve()};return e.addEventListener?(e.addEventListener("DOMContentLoaded",r),t.addEventListener("load",r),n.always(function(){e.removeEventListener("DOMContentLoaded",r),t.removeEventListener("load",r),e=null,r=null,n=null})):e.attachEvent&&(t.attachEvent("onload",r),n.always(function(){t.detachEvent("onload",r),e=null,r=null,n=null})),n.promise()};x=function(){return e||(e=n()),e}}();!function(){var e=function(t,e){return function(){return t.moduleExecute(e).end()}};C=function(n,r){return x().then(function(){var i=t.document,s=h.done;if(i){var a,l,c=i.getElementsByTagName("script");for(a=0,l=c.length;l>a;a++){var u=c[a];if(u.type===r){var p=u.getAttribute("data-filename");try{var d=n.jsModuleDefine(u.innerHTML,p);s=s.then(e(n,d))}catch(f){o(f)}}}}return s}).end()}}();!function(){var t=/(?=[\/'"]|\brequire\s*\()/,e=/^require\s*\(\s*$/,n=/[\r\n]/,r=/^['"]$/,i=/^(\w{2,}|[!%&\(*+,\-\/:;<=>?\[\^])$/,s=/^\s*(\S)/,o=/(\b(return|throw|new|in)|\S)\s*$/,a=/\s*\)\s*\.\s*([_$a-zA-Z][_$a-zA-Z0-9]*)\s*\(\s*/g,h=/[_$a-zA-Z][_$a-zA-Z0-9]*/g,l=/\s*(\)|,)\s*/g,c=function(t){for(var e=!1,n=t.length-1;n>=0&&"\\"==t.charAt(n);)n--,e=!e;return e},u=function(t,e){for(;e>=0;e--){var n=t[e];if(o.test(n))return RegExp.$1}return""},p=function(t,e){return 0===e||"."!=u(t,e-1)},d=function(t,e){return 0===e||i.test(u(t,e-1))},f=function(t,e){var n=t[e].charAt(0);e++;for(var r=t.length;r>e;e++){var i=t[e].charAt(0);if(i===n&&!c(t[e-1]))break}return e},v=function(t,e){for(var r=e+1,i=t.length;i>r;r++){var s=t[r],o=s.search(n);if(o>-1){t[r]=s.substring(o);break}}return t.splice(e,r-e),e},g=function(t,e){var n=e+1;"/*"==t[e]&&n++;for(var r=t[n-1],i=t.length;i>n;n++){var s=r;if(r=t[n],"*"==s.charAt(s.length-1)&&"/"==r.charAt(0)){t[n]=r.substring(1);break}}return t.splice(e,n-e),e},m=function(n){for(var i=[],o=[],a=0,h=n.split(t),l=h.length,c=-1;l>a&&a>=0;a++){var u=h[a],m=u.charAt(0);if("/"==m)"/"==u&&l>a+1&&"/"==h[a+1].charAt(0)?(a=v(h,a),l=h.length):"*"==u.charAt(1)?(a=g(h,a),l=h.length):d(h,a)&&(a=f(h,a));else if(r.test(m)){var y=a;a=f(h,a),i.push([y,a]),2==c&&(c=3)}else"r"==m&&e.test(u)&&p(h,a)&&(c=1);c>0&&(1==c?c=2:(u=h[a],3==c&&(u=u.substring(1),c=4),s.test(u)&&(4==c&&")"==RegExp.$1&&o.push(i.length-1),c=0)))}return[h,i,o]},y=function(t){for(var e=[0],n=1,r=t.length;r>=n;n++)e[n]=e[n-1]+t[n-1].length;return function(t){return[e[t[0]]+1,e[t[1]]]}},b=function(t,e){return t.substring.apply(t,e)},x=function(t,e,n){t.lastIndex=n;var r=t.exec(e);return r&&r.index==n?r:void 0},C=/(^|\/)\$[^\/]*$/;N=function(t,e){var n=m(t),r=n[2],i=r.length,s={},o=[];if(r.length)for(var c=y(n[0]),u=n[0].join(""),p=n[1],d=p.length,f=0;i>f;f++){var v=r[f],g=c(p[v]),N=b(u,g);if(s[N]||(o.push(N),s[N]=!0),e&&C.test(N)){var E=x(a,u,g[1]+1);if(E){var w=E[1],$=[],A=++v<d&&c(p[v]);do{var T=E.index+E[0].length;if(A&&T+1===A[0])$.push(b(u,A)),T=A[1]+1,A=++v<d&&c(p[v]);else{if(E=x(h,u,T),!E)break;T=h.lastIndex,$.push([E[0]])}E=x(l,u,T)}while(E&&","==E[1]);E&&o.push({module:N,method:w,args:$})}}}return o}}();!function(){var e=v.dirname,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e,n){return function(r){return t.call(e,n,r)}},s=function(t,n){this.dirname=n?e(n):n=".",this._noder={},this.filename=n,this.id=n,this.require=i(t.moduleRequire,t,this),this.require.resolve=i(t.moduleResolve,t,this),this.require.cache=t.cache,this.parent=null,this.children=[],this.preloaded=!1,this.loaded=!1,this.exports={}},o=function(t,e){return t._noder[e]},a=function(t,e,n){return t._noder[e]=n,n},l=function(t){var e=t.config,n=h.done,r=e.main;n=n.thenSync(r?function(){return t.execModuleCall(r)}:h.empty),n=n.thenSync(e.onstart),"scriptsType"in e||(e.scriptsType=e.varName);var i=e.scriptsType;return i&&(n=n.thenSync(function(){return C(t,i)})),n.always(function(){t=null,e=null,n=null})},u=function(){},p=function(t,e,n){var r=t||e;return new r(n,e)},f=function(e){e=e||{},this.config=e,this.cache={},this.builtinModules=new u;var r=new s(this);r.preloaded=!0,r.loaded=!0,r.define=this.define=n(this.define,this),r.asyncRequire=i(this.moduleAsyncRequire,this,r),r.execute=n(this.jsModuleExecute,this),r.createContext=f.createContext,this.rootModule=r,this.resolver=p(e.Resolver,b,this),this.loader=p(e.Loader,y,this);var o=e.varName;o&&(t[o]=r),l(this).end()},g=f.prototype={},m=function(t,e){if(e===t)return!0;var n=o(e,5);if(n)for(var r=0;n[r];r++)if(m(t,n[r]))return!0;return!1};g.modulePreload=function(t,e){if(t.preloaded)return h.done;var n=o(t,3),r=o(t,5);if(n||r){if(e){if(m(t,e))return h.done;r.push(e)}if(!n)throw c("modulePreloadRec",[t]);return n}var i=this;return e&&"."!=e.id?(t.parent=e,t.require.main=e.require.main,e.children.push(t)):t.require.main=t,a(t,5,e?[e]:[]),a(t,3,i.moduleLoadDefinition(t).thenSync(function(){return i.modulePreloadDependencies(t,o(t,1))}).thenSync(function(){t.preloaded=!0,a(t,3,!1),a(t,5,null)},function(e){throw c("modulePreload",[t],e)}).always(function(){t=null,i=null,e=null}))},g.moduleLoadDefinition=function(t){if(o(t,0))return h.done;var e=o(t,4);if(!e){var n=t.filename,r=this.builtinModules["/"+n];if(r)this.moduleDefine(t,[],r(this)),e=h.done;else{var i=!0,s=function(e){if(!o(t,0))throw c("moduleLoadDefinition",[t],e);i=!1};e=this.loader.moduleLoad(t).thenSync(s,s),i&&a(t,4,e)}}return e},g.moduleProcessPlugin=function(t,e){for(var n={module:t,__dirname:t.dirname,__filename:t.filename},i=e.args.slice(0),s=0,o=i.length;o>s;s++){var a=i[s];if(r.isArray(a)){if(a=a[0],!n.hasOwnProperty(a))return;i[s]=n[a]}}return this.moduleExecute(this.getModule(this.moduleResolve(t,e.module))).thenSync(function(t){var n=(t[e.method]||{}).$preload;return n?n.apply(t,i):void 0}).thenSync(null,function(n){throw c("moduleProcessPlugin",[t,e],n)})},g.modulePreloadDependencies=function(t,e){for(var n=[],i=0,s=e.length;s>i;i++){var o=e[i],a=r.isString(o)?this.modulePreload(this.getModule(this.moduleResolve(t,o)),t):this.moduleProcessPlugin(t,o);n.push(a)}return h.when(n)},g.moduleExecuteSync=function(e){if(e.loaded||o(e,2))return e.exports;if("resolved"!=this.modulePreload(e).state())throw c("notPreloaded",[e]);var n=e.exports;a(e,2,!0);try{return o(e,0).call(n,e,t),a(e,0,null),a(e,1,null),e.loaded=!0,e.exports}finally{a(e,2,!1)}},g.moduleResolve=function(t,e){return this.resolver.moduleResolve(t,e)},g.moduleRequire=function(t,e){return this.moduleExecuteSync(this.getModule(this.moduleResolve(t,e)))},g.getModule=function(t){if(!t)return new s(this);var e=this.cache[t];return e||(this.cache[t]=e=new s(this,t)),e},g.define=function(t,e,n){this.moduleDefine(this.getModule(t),e,n)},g.moduleDefine=function(t,e,n){return o(t,0)||(a(t,0,n),a(t,1,e),a(t,4,!1)),t},g.moduleExecute=function(t){var e=this;return e.modulePreload(t).thenSync(function(){return e.moduleExecuteSync(t)}).always(function(){e=null,t=null})},g.moduleAsyncRequire=function(t,e){return r.isArray(e)?this.modulePreloadDependencies(t,e):r.isString(e)?this.moduleRequire(t,e):void 0},g.jsModuleDefine=function(t,e,n,r){var i=N(t,!0),s=this.jsModuleEval(t,n||e,r);return this.moduleDefine(this.getModule(e),i,s)},g.jsModuleExecute=function(t,e,n){return this.moduleExecute(this.jsModuleDefine(t,e,n))},g.jsModuleEval=function(t,e,n){var r=["(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n",t,"\n\n})"];return d(r.join(""),e,(n||0)+3)},g.execModuleCall=function(t){return this.moduleExecute(this.getModule(this.moduleResolve(this.rootModule,t)))},f.builtinModules=u.prototype={"/noder-js/asyncRequire.js":function(t){return function(e){e.exports={create:function(e){return function(n){return t.moduleAsyncRequire(e,n)}}}}},"/noder-js/currentContext.js":function(t){return function(e){e.exports=t}}},g.Context=f,f.createContext=function(t){return new f(t).rootModule},f.expose=g.expose=function(t,e){var n=function(t){t.exports=e};this.builtinModules["/"+t]=function(){return n}},E=f}();!function(){var t={},e=g.innerHTML;/^\s*$/.test(e||"")||(t=p(e)||t);var n=g.src;if(!t.main&&n){var r=n.indexOf("?");r>-1&&(t.main=decodeURIComponent(n.substring(r+1)))}w=t}();!function(){var t=l().mainContext;i(t,w,!0),$=t}();return E.expose("noder-js/promise.js",h),E.expose("noder-js/context.js",E),E.expose("noder-js/findRequires.js",N),E.expose("noder-js/jsEval.js",d),E.expose("noder-js/request.js",u),E.expose("noder-js/asyncCall.js",a),A=E.createContext($)}(function(){return this}(),function(){eval(arguments[0])},function(){return{mainContext:{varName:"noder",scriptsType:"noder",resolver:{"default":{}},packaging:{bootstrap:function(t){t("hsp/json.js",[],function(t){function e(t,e,n,r,i){return{type:i,object:t,name:e,newValue:n,oldValue:r}}function n(t,e){var n=t[s];if(n)for(var r,i=0,o=n.length;o>i;i++)r=n[i],r.constructor===Function&&r(e)}function r(t,e,n){"object"==typeof t&&(t[n]||(t[n]=[]),t[n].push(e))}function i(t,e,n){if("object"==typeof t){var r=t[n];if(r){for(var i,s=[],o=0,a=r.length;a>o;o++)i=r[o],i!==e&&s.push(i);0===s.length?delete t[n]:t[n]=s}}}t.require,t.exports,t.filename,t.dirname;var s="+json:observers",o=Array.prototype,a=o.splice,h=o.push,l=o.shift,c=o.pop,u=o.reverse,p=o.sort,d=o.unshift;Array.prototype.splice=function(t){if(this[s]){var r=this.length,i=a.apply(this,arguments),o=this.length,h=[e(this,t,null,null,"splice")];return r!==o&&h.push(e(this,"length",o,r,"updated")),n(this,h),i}return a.apply(this,arguments)},Array.prototype.splice2=function(t,r,i){var o=this.length;i||(i=[]),i.splice(0,0,t,r);var h=a.apply(this,i);if(this[s]){var l=this.length,c=[e(this,t,null,null,"splice")];o!==l&&c.push(e(this,"length",l,o,"updated")),n(this,c)}return h},Array.prototype.push=function(){if(this[s]){var t,r,i=arguments,o=i.length,a=this.length,l=[];if(1>o)return a;if(1==o)r=h.call(this,i[0]),l.push(e(this,a,i[0],null,"new"));else{for(var c=0;o>c;c++)t=i[c],l[o-c-1]={type:"new",object:this,name:a+c,newValue:t};r=h.apply(this,i)}return a!==r&&l.push(e(this,"length",r,a,"updated")),n(this,l),r}return h.apply(this,arguments)},Array.prototype.shift=function(){if(this[s]){var t=this.length,r=l.call(this),i=this.length,o=[e(this,0,null,null,"shift")];return t!==i&&o.push(e(this,"length",i,t,"updated")),n(this,o),r}return l.call(this)},Array.prototype.unshift=function(){if(this[s]){var t=this.length,r=d.apply(this,arguments),i=[e(this,0,null,null,"unshift")];return t!==r&&i.push(e(this,"length",r,t,"updated")),n(this,i),r}return d.apply(this,arguments)},Array.prototype.pop=function(){if(this[s]){var t=this.length,r=c.call(this),i=this.length,o=[e(this,0,null,null,"pop")];return t!==i&&o.push(e(this,"length",i,t,"updated")),n(this,o),r}return c.call(this)},Array.prototype.reverse=function(){var t=u.call(this);return n(this,[e(this,0,null,null,"reverse")]),t},Array.prototype.sort=function(t){var r=p.call(this,t);return n(this,[e(this,0,null,null,"sort")]),r},t.exports={MD_OBSERVERS:s,set:function(t,r,i){if("object"!=typeof t)return console.log("[json.set] Invalid object used to set a value"),void 0;if(t[s]){var o=t.hasOwnProperty(r),a=t[r],h=t.length,l=null;if(t[r]=i,o?a!==i&&(l=[e(t,r,i,a,"updated")]):l=[e(t,r,i,a,"new")],t.constructor===Array){var c=t.length;h!==c&&(l||(l=[]),l.push(e(t,"length",c,h,"updated")))}return l&&n(t,l),i}t[r]=i},observe:function(t,e){r(t,e,s)},unobserve:function(t,e){i(t,e,s)}}}),t("hsp/$set.js",["hsp/json"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/json");t.exports=function(t,e,r){n.set(t,e,r)}}),t("hsp/document.js",[],function(t){t.require,t.exports,t.filename,t.dirname;var e=window.document;t.exports.createDocumentFragment=function(){return e.createDocumentFragment()},t.exports.createElement=function(t){return e.createElement(t)},t.exports.createElementNS=function(t,n){return e.createElementNS(t,n)},t.exports.createTextNode=function(t){return e.createTextNode(t)},t.exports.createComment=function(t){return e.createComment(t)},t.exports.getElementById=function(t){return e.getElementById(t)}}),t("hsp/es5.js",[],function(t){t.require,t.exports,t.filename,t.dirname,Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in e&&e[i]===t)return i;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i})}),t("hsp/klass.js",[],function(t){function e(){}function n(t){return Object.create?Object.create(t):(e.prototype=t,new e)}function r(){return s++,"+"+s+":"}t.require,t.exports,t.filename,t.dirname;var i=function(t){var e=t.$constructor;if(!e){var r=t.$extends;e=r?function(){r.apply(this,arguments)}:new Function,t.$constructor=e}if(t.$extends){if(!t.$extends.prototype)throw new Error("[klass] $extends attribute must be a function");var i=n(t.$extends.prototype);for(var s in t)t.hasOwnProperty(s)&&(i[s]=e[s]=t[s]);e.prototype=i}else{e.prototype=t;for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])}return e};i.createObject=n;var s=0;i.createMetaDataPrefix=r,t.exports=i}),t("hsp/propobserver.js",["hsp/klass","hsp/json"],function(t){function e(t){for(var e,r=0,i=t.length;i>r;r++)e=t[r],e&&this.props[e.name]&&n(this,e,e.name);this.props[o]&&n(this,e,o)}function n(t,e,n){for(var r=t.props[n],i=0,s=r.length;s>i;i++)r[i].onPropChange(e)}var r=t.require;t.exports,t.filename,t.dirname;var i=r("hsp/klass"),s=r("hsp/json"),o="**ALL**",a=i({$constructor:function(t){this.id=0,this.target=t,this.props={};var n=this;this.callback=function(t){e.call(n,t)},s.observe(t,this.callback)},$dispose:function(){s.unobserve(this.target,this.callback),delete this.props,delete this.callback,delete this.target},addObserver:function(t,e){e||(e=o);var n=this.props[e];n||(n=[],this.props[e]=n),n.push(t)},rmObserver:function(t,e){e||(e=o);var n=this.props[e];if(n){for(var r=0,i=n.length;i>r;r++)n[r]===t&&(n.splice(r,1),i-=1,r-=1);0===n.length&&delete this.props[e]}}});t.exports=a}),t("hsp/rt/exphandler.js",["../klass","../json"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("../klass"),r=e("../json"),i=n({$constructor:function(t){this.exps={};var e,n,r=null;for(var i in t)e=t[i],e.constructor===Array?(n=e[0],5===n?r=new s(e):0===n||1===n||2===n?r=new o(e):3===n||4===n?r=new a(e):6===n?r=new h(e,this):console.warn("Unsupported expression type: "+n),r&&(this.exps[i]=r)):console.warn("Unsupported expression definition: "+e)},getValue:function(t,e,n){return this.exps["e"+t].getValue(e,this,n)},getExpr:function(t){return this.exps["e"+t]}});t.exports=i;var s=n({$constructor:function(t){this.value=t[1]},getValue:function(){return this.value},getObservablePairs:function(){return null}}),o=n({bound:!1,$constructor:function(t){var e,n,r=t[0],i=t[1],s=2===r||4===r,o=[];s?(e=t[2],o=t.slice(3,i+2),n=i-1):(e="#scope",o=t.slice(2,i+2),n=i),this.bound=1===r,this.isLiteral=s,this.root=e,this.path=o,this.ppLength=n},getValue:function(t,e,n){var r=this.isLiteral?this.root:t[this.root],i=this.ppLength;if("undefined"==typeof r)return n;if(1===i)r=r[this.path[0]];else for(var s=this.path,o=0;i>o;o++)if(r=r[s[o]],void 0===r)return n;return void 0!==r?r:n},setValue:function(t,e){if(this.isLiteral&&this.ppLength<=0)console.warn("[DataRefExpr.setValue] Global literal values cannot be updated from the DOM - please use object referenes");else{var n=this.isLiteral?this.root:t[this.root],i=this.ppLength,s=!0;if(1>i)return;for(var o=0;i-1>o;o++)if(n=n[this.path[o]],void 0===n){s=!1;break}s&&r.set(n,this.path[i-1],e)}},getObservablePairs:function(t,e){if(!this.bound)return null;var n=this.ppLength;if(1>n)return null;var r=this.isLiteral?this.root:e[this.root];if(void 0===r)return null;if(1===n)return[[r,this.path[0]]];for(var i,s=[],o=this.path,a=0;n>a&&(i=o[a],s.push([r,i]),r=r[i],void 0!==r);a++);return s}}),a=n({$extends:o,$constructor:function(t){o.$constructor.call(this,t);var e=t[1]+2;this.args=t.length>e?t.slice(e):null},getFuncRef:function(t,e){var n=this.isLiteral?this.root:t[this.root],r=this.ppLength,i=null;if(!n)return e;if(1===r){if(i=n,n=n[this.path[0]],void 0===n)return e}else for(var s=this.path,o=0;r>o;o++)if(i=n,n=n[s[o]],void 0===n)return e;return{fn:n,scope:i,args:this.args}},getValue:function(t,e,n){var r=this.executeCb({},e,t);return void 0===r?n:r},executeCb:function(t,e,n){var r,i=this.getFuncRef(n,null);if(!i)return console.log("[hashspace event handler] Invalid callback context");if(r=i.fn,!r||r.constructor!==Function)return console.log("[hashspace event handler] Invalid callback function");var s=[],o=n.event;n.event=t;var a=this.args;if(a)for(var h=0,l=a.length;l>h;h+=2)0===a[h]?s.push(a[h+1]):s.push(e.getValue(a[h+1],n,null));return void 0===o?delete n.event:n.event=o,r.apply(i.scope,s)},getObservablePairs:function(t,e){var n=o.getObservablePairs.call(this,t,e);return n}}),h=n({$constructor:function(t,e){this.fn=t[1],this.eh=e;var n=t.length-2;this.args=n>0?t.slice(2):null},getValue:function(t,e,n){if(this.args){for(var r=[],i=0,s=this.args.length;s>i;i++)r[i]=this.eh.getValue(this.args[i],t,null);try{var o=this.fn.apply({},r);return o}catch(a){return n}}else try{return this.fn.call({})}catch(a){return n}},getObservablePairs:function(){return null}})}),t("hsp/rt/tnode.js",["hsp/rt","hsp/klass","./exphandler"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/rt"),r=e("hsp/klass"),i=e("./exphandler"),s=r({node:null,vscope:null,root:null,parent:null,children:null,childNodes:null,adirty:!1,cdirty:!1,htmlCbs:null,nodeNS:null,$constructor:function(t){this.isStatic=0===t,this.isStatic||(this.eh=new i(t))},$dispose:function(){var t=this.childNodes;if(t){for(var e=0,n=t.length;n>e;e++)t[e].$dispose();delete this.childNodes}this.htmlCbs=null,delete this.node,delete this.parent,delete this.root,delete this.vscope,delete this.children,delete this.atts,delete this.evtHandlers},createAttList:function(t,e){if(e){var n,r=[];for(var i in e)n=new h(i,e[i]),n.isHtmlCallback&&(this.htmlCbs||(this.htmlCbs=[]),this.htmlCbs.push(n)),r.push(n);this.evtHandlers=r}if(null===t||0===t)return null;var s,l=[];for(var i in t)t.hasOwnProperty(i)&&(s=t[i],null===s?l.push(new o(i,i)):"string"==typeof s?l.push(new o(i,s)):s.constructor===Array?l.push(new a(i,s)):console.log("[TNode] unsupported attribute: "+s));this.atts=l},onPropChange:function(){var t=this.root;this.adirty||(this.adirty=!0,this===t&&n.refresh.addTemplate(this));for(var e=this.parent;e;)e.cdirty?e=null:(e.cdirty=!0,e===t&&n.refresh.addTemplate(e),e=e.parent)},createNodeInstance:function(t){var e=r.createObject(this);if(e.vscope=t.vscope,e.parent=t,e.nodeNS=t.nodeNS,e.root=t.root,e.root.createExpressionObservers(e),this.isDOMless)e.node=e.parent.node;else if(e.createNode(),e.parent.node&&e.parent.node.appendChild(e.node),this.children){e.childNodes=[];for(var n=0,i=this.children.length;i>n;n++)e.childNodes[n]=this.children[n].createNodeInstance(e)}return e},refresh:function(){if(this.cdirty){var t=this.childNodes;if(t)for(var e=0,n=t.length;n>e;e++)t[e].refresh();this.cdirty=!1}},createNode:function(){},replaceNodeBy:function(t,e){if(t!==e&&this.node===t){this.node=e;var n=this.childNodes;if(n)for(var r=0,i=n.length;i>r;r++)n[r].replaceNodeBy(t,e)}}}),o=r({$constructor:function(t,e){this.name=t,this.value=e},getValue:function(){return this.value}}),a=r({$constructor:function(t,e){this.name=t,this.textcfg=e},getValue:function(t,e,n){var r=this.textcfg,i=r.length,s=[];if(2===i&&""===r[0])return t.getValue(r[1],e,n);for(var o=0;i>o;o++)o%2?s.push(t.getValue(r[o],e,n)):s.push(r[o]);return s.join("")}}),h=r({$constructor:function(t,e){this.evtType=t;var n="number"!=typeof e;n?(this.isHtmlCallback=!0,this.htmlCb=e):this.expIdx=e},executeCb:function(t,e,n){if(this.expIdx){var r=e.getExpr(this.expIdx);if(r)return r.executeCb(t,e,n)}}});t.exports.TNode=s,t.exports.TSimpleAtt=o,t.exports.TExpAtt=a}),t("hsp/rt/cptattinsert.js",[],function(t){t.require,t.exports,t.filename,t.dirname;var e=11;t.exports.$CptAttInsert={initCpt:function(t,n){var r=this.vscope[t],i=r.nodeInstance;if(i.tplAttributes){var s=i.tplAttributes[n];s&&(this.node.appendChild(s.node),s.node.nodeType===e&&(s.node=this.node),s.parent=this,this.childNodes=[],this.childNodes[0]=s)}},$dispose:function(){this.cleanObjectProperties()}}}),t("hsp/rt/cptattribute.js",["hsp/document"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/document");t.exports.$CptAttribute={initCpt:function(t){if(this.tplAttribute={name:t},this.node=n.createDocumentFragment(),this.children){this.childNodes=[];for(var e=0,r=this.children.length;r>e;e++)this.childNodes[e]=this.children[e].createNodeInstance(this)}},$dispose:function(){this.cleanObjectProperties()}}}),t("hsp/rt/$text.js",["hsp/klass","hsp/document","hsp/rt/tnode"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("hsp/document"),i=e("hsp/rt/tnode").TNode,s=e("hsp/rt/tnode").TExpAtt,o=n({$extends:i,$constructor:function(t,e){i.$constructor.call(this,t),this.textcfg=e,this.isStatic&&(e||(this.textcfg=[""]))},createNode:function(){this.node=r.createTextNode(this.getContent())},getContent:function(){var t=this.textcfg;return this.isStatic?t[0]:s.getValue.call(this,this.eh,this.vscope,"")},refresh:function(){this.adirty&&(this.node.nodeValue=this.getContent(),this.adirty=!1)}});t.exports=o}),t("hsp/rt/cptcomponent.js",["hsp/json","hsp/rt/$text","hsp/rt/tnode","hsp/document"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/json"),r=e("hsp/rt/$text"),i=e("hsp/rt/tnode").TNode,s=e("hsp/document");t.exports.$CptComponent={initCpt:function(t){this.isCptComponent=!0;var e={};if(this.atts)for(var r,i=this.parent.vscope,s=0,o=this.atts.length;o>s;s++)r=this.atts[s],e[r.name]=r.getValue(this.eh,i,null);var a=t.controllerConstructor;if(this.ctlAttributes=a.prototype.attributes,this.loadCptAttributes(),t.call(this,e),this.ctlWrapper&&(this.ctlWrapper.nodeInstance=this),this.controller&&this.tplAttributes){var h=this.controller,l=this.tplAttributes;for(var c in l)l.hasOwnProperty(c)&&n.set(h,c,{node:l[c]})}},$dispose:function(){this.ctlAttributes=null,this.cleanObjectProperties();var t=this.tplAttributes;if(t)for(var e in t)t.hasOwnProperty(e)&&t[e].$dispose();var n=this._attGenerators;if(n)for(var e in n)n.hasOwnProperty(e)&&n[e].$dispose()},loadCptAttributes:function(){var t={},e=this.ctlAttributes,n=null,o=null,a=0;for(var h in e)e.hasOwnProperty(h)&&"template"===e[h].type&&(t[h]=!0,a++,e[h].defaultContent&&(n=h),o=h);if(n||1!==a||(n=o),this.children){var l,c=!1,u=[],p=this.node;this.node=null;for(var d=0,f=this.children.length;f>d;d++){if(l=this.children[d].createNodeInstance(this),l.tplAttribute){c=!0;var v=l.tplAttribute.name;this.tplAttributes||(this.tplAttributes={}),this.tplAttributes[v]=l}u.push(l)}if(this.node=p,!c)if(n){var g=new i(0);g.isDOMless=!0;var m=g.createNodeInstance(this);m.node=s.createDocumentFragment(),m.isDOMless=!1,g.childNodes=u;for(var h in u)u.hasOwnProperty(h)&&(u[h].parent=m,m.node.appendChild(u[h].node));this.tplAttributes={},this.tplAttributes[n]=m}else console.error("Component content cannot be associated to any component attribute")}var y,v,b=this.atts;if(b)for(var h in b)if(b.hasOwnProperty(h)&&(y=b[h],v=y.name,t[v]))if(this.tplAttributes&&this.tplAttributes[v])console.error("Component attribute '"+v+"' is defined multiple times - please check");else{if(!y.generator){var x;x=y.value?new r(0,[""+y.value]):new r(this.exps,b[h].textcfg),this._attGenerators||(this._attGenerators=[]),this._attGenerators.push(x),y.generator=x}var l=y.generator.createNodeInstance(this);this.tplAttributes||(this.tplAttributes={}),this.tplAttributes[v]=l}},getTplAttribute:function(t){var e=this.ctlAttributes;return e?e[t]:null},onEvent:function(t){var e=this.evtHandlers,n=t.type;if(e)for(var r=0,i=e.length;i>r;r++)if(e[r].evtType===n){e[r].executeCb(t,this.eh,this.parent.vscope);break}},refreshAttributes:function(){var t,e,r=this.atts,i=this.eh,s=this.parent.vscope,o=this.controller;if(this.adirty=!1,r&&o&&o.attributes)for(var a=0,h=this.atts.length;h>a;a++)t=r[a],0!==o.attributes[t.name]._binding&&(e=t.getValue(i,s,null),""+e!=""+o[t.name]&&n.set(o,t.name,e))}}}),t("hsp/rt/cpttemplate.js",["hsp/json"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/json");t.exports.$CptTemplate={initCpt:function(t){var e={};if(this.atts)for(var r,i=this.parent.vscope,s=0,o=this.atts.length;o>s;s++)r=this.atts[s],e[r.name]=r.getValue(this.eh,i,null);t.call(this,e),this._scopeChgeCb=this.onScopeChange.bind(this),n.observe(this.vscope,this._scopeChgeCb)},$dispose:function(){this.cleanObjectProperties()},onScopeChange:function(t){t.constructor===Array&&t.length>0&&this.onAttributeChange(t[0])},refreshAttributes:function(){var t,e=this.atts,r=this.eh,i=this.parent.vscope;if(this.adirty=!1,e)for(var s=this.vscope,o=0,a=this.atts.length;a>o;o++)t=e[o],n.set(s,t.name,t.getValue(r,i,null))}}}),t("hsp/rt/$root.js",["hsp/klass","hsp/document","hsp/json","hsp/propobserver","hsp/rt/tnode","hsp/rt/cptattinsert","hsp/rt/cptattribute","hsp/rt/cptcomponent","hsp/rt/cpttemplate"],function(t){var e=t.require,n=t.exports;
t.filename,t.dirname;var r=e("hsp/klass"),i=e("hsp/document"),s=e("hsp/json"),o=e("hsp/propobserver"),a=e("hsp/rt/tnode"),h=a.TNode,l={$CptAttInsert:e("hsp/rt/cptattinsert").$CptAttInsert,$CptAttribute:e("hsp/rt/cptattribute").$CptAttribute,$CptComponent:e("hsp/rt/cptcomponent").$CptComponent,$CptTemplate:e("hsp/rt/cpttemplate").$CptTemplate},c=11,u=r({$extends:h,$constructor:function(t,e,n,s,o){if(this.isInsertNode)h.$constructor.call(this,this.exps);else{h.$constructor.call(this,0);var a=i.createDocumentFragment();this.node=a,this.root=this}this.MD_ID=r.createMetaDataPrefix()+"oid",this.propObs=[],this.argNames=null,(t||e||n||s)&&this.init(t,e,n,s,o)},init:function(t,e,n,r,i){if(this.vscope=t,r)this.ctlWrapper=r,this.controller=r.cpt,this.ctlWrapper.init(i);else if(this.$constructor===f&&i)for(var s in i)t[s]=i[s];var o=[];if(e.constructor===Array)for(var a=0,h=e.length;h>a;a++)o.push(e[a].createNodeInstance(this));else o[0]=e.createNodeInstance(this);this.childNodes=o,this.argNames=n},$dispose:function(){for(var t,e=0,n=this.propObs.length;n>e;e++)t=this.propObs[e],delete t.target[this.MD_ID],t.$dispose();delete this.propObs,this.ctlWrapper&&(this.ctlWrapper.$dispose(),this.ctlWrapper=null,this.controller=null),h.$dispose.call(this)},createExpressionObservers:function(t){var e,n,r=t.vscope,i=t.eh;if(i)for(var s in i.exps)if(e=i.exps[s].getObservablePairs(i,r))if(n=e.length,1===n)this.createObjectObserver(t,e[0][0],e[0][1]);else for(var o=0;n>o;o++)this.createObjectObserver(t,e[o][0],e[o][1])},createObjectObserver:function(t,e,n){var r,i=e[this.MD_ID];if(i)r=this.propObs[i-1];else{r=new o(e);var s=this.propObs.length;this.propObs[s]=r,r.id=i=s+1,e[this.MD_ID]=i}r.addObserver(t,n)},rmObjectObserver:function(t,e,n){var r=e[this.MD_ID];if(r){var i=this.propObs[r-1];i.rmObserver(t,n)}},updateArgument:function(t,e){s.set(this.vscope["#scope"],this.argNames[t],e)},render:function(t,e){var n=t;if("string"==typeof n&&(n=i.getElementById(n),null===n))return console.error("[hashspace] Template cannot be rendered - Invalid element id: "+t),void 0;var r=this.node;r.nodeType!==c?console.log("[hashspace] root element can only be appended once in the DOM"):(e!==!1&&(n.innerHTML=""),n.appendChild(r),this.replaceNodeBy(r,n))},querySelector:function(t){var e=this.node;return e.querySelector?e.querySelector(t):(console.error("[$Root] querySelector() is not supported by this browser"),null)},querySelectorAll:function(t){var e=this.node;return e.querySelector?e.querySelectorAll(t):(console.error("[$Root] querySelectorAll() is not supported by this browser"),null)}}),p=n.getObject=function(t,e){var n=t[0],r=null,i=t.length;if(void 0===n||null===n){if(e&&i>1&&(r=e[t[1]]),void 0===r||null===r)return null}else r=n;if(i>2)for(var s=2;i>s;s++)r=r[t[s]];return r},d=r({$extends:u,$constructor:function(t,e){this.isInsertNode=!0,this.isDOMless=!0,this.exps=t,u.$constructor.call(this),this.expIdx=e},$dispose:function(){u.$dispose.call(this),delete this.exps},createNodeInstance:function(t){var e=h.createNodeInstance.call(this,t),n=e.eh.getExpr(e.expIdx);return n&&n.getFuncRef?(n=n.getFuncRef(e.vscope,null),e.func=n.fn,e.tplArgs=n.args,e.isTemplate=e.func.isTemplate===!0,e.isTemplate?e.func.apply(e,e.getArguments()):(e.isDOMless=!1,e.node=i.createTextNode(e.getContent()),e.parent.node.appendChild(e.node))):console.log("[$InsertNode] Invalid template function"),e},getArguments:function(){for(var t=this.tplArgs,e=[],n=this.eh,r=0,i=t.length;i>r;r+=2)t[r]?e.push(n.getValue(t[r+1],this.vscope,null)):e.push(t[r+1]);return e},getContent:function(){return this.isTemplate?"":this.func.apply({},this.getArguments())},refresh:function(){if(this.adirty){if(this.isTemplate)for(var t=this.parent.vscope,e=this.tplArgs,n=this.eh,r=0,i=0,s=e.length;s>r;r+=2,i++)e[r]&&this.updateArgument(i,n.getValue(e[r+1],t,null));else this.node.nodeValue=this.getContent();this.adirty=!1}h.refresh.call(this)}}),f=r({$extends:u,$constructor:function(t,e,n,r,i){this.tplPath=t,this.isInsertNode=!0,this.isDOMless=!0,this.exps=e,this.attcfg=n,u.$constructor.call(this),this.createAttList(n,r),this.controller=null,this.ctlAttributes=null,this._scopeChgeCb=null,this.tplAttribute=null,i&&0!==i&&(this.children=i)},$dispose:function(){this.cleanObjectProperties()},cleanObjectProperties:function(){this._scopeChgeCb&&(s.unobserve(this.vscope,this._scopeChgeCb),this._scopeChgeCb=null),u.$dispose.call(this),this.exps=null,this.controller=null,this.ctlAttributes=null},createNodeInstance:function(t){var e=null,n=t.vscope,r=this.tplPath;if(3===r.length){var i=r[1],s=n[i];if(s&&s.attributes){var o=s.attributes[r[2]];o&&"template"===o.type&&(e=this.createCptIntance("$CptAttInsert",t),e.initCpt(r[1],r[2]))}}else if(2===r.length&&t.getTplAttribute){var a=t.getTplAttribute(r[1]);a&&(e=this.createCptIntance("$CptAttribute",t),e.initCpt(r[1]))}if(!e){var h=p(r,n);h&&"function"==typeof h&&(e=h.controllerConstructor?this.createCptIntance("$CptComponent",t):this.createCptIntance("$CptTemplate",t),e.initCpt(h))}return e||console.error("Invalid component reference: "+r.slice(1).join(".")),e},createCptIntance:function(t,e){this.cptTypes||(this.cptTypes={});var n=this.cptTypes[t];if(!n){var i=l[t],s=r.createObject(this);for(var o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);n=s,this.cptTypes[t]=n}var a=r.createObject(n);return a.vscope=e.vscope,a.parent=e,a.nodeNS=e.nodeNS,a.root=e.root,a.root.createExpressionObservers(a),a.node=a.parent.node,a},onAttributeChange:function(t){var e=-1,n=this.attcfg[t.name];if(n&&n.constructor===Array&&2===n.length&&""===n[0]&&(e=n[1]),e>-1){var r=this.eh.getExpr(e);r.bound&&r.setValue&&r.setValue(this.parent.vscope,t.newValue)}},refresh:function(){this.adirty&&(this.refreshAttributes&&this.refreshAttributes(),this.adirty=!1),h.refresh.call(this)}});t.exports.$RootNode=u,t.exports.$InsertNode=d,t.exports.$CptNode=f}),t("hsp/rt/cptwrapper.js",["hsp/json","hsp/klass"],function(t){function e(t){return t}function n(t){var e=t.defaultValue,n=t.type;return void 0===e||"template"===n?o[n].defaultValue:o[n].convert(e,{type:"string"})}var r=t.require;t.exports,t.filename,t.dirname;var i=r("hsp/json"),s=r("hsp/klass"),o={"int":{defaultValue:0,convert:function(t,e){var r=parseInt(t,10);return isNaN(r)?n(e):r}},"float":{defaultValue:0,convert:function(t,e){var r=parseFloat(t);return isNaN(r)?n(e):r}},"boolean":{defaultValue:!0,convert:function(t){return t===!0||1===t||"1"===t||"true"===t}},string:{defaultValue:"",convert:function(t){return t+""}},object:{defaultValue:null,convert:e},callback:{defaultValue:null,convert:e},template:{defaultValue:null,convert:e}},a={none:0,"1-way":1,"2-way":2},h=s({$constructor:function(t){if(t&&t.constructor===Function){this.cpt=new t,this.nodeInstance=null,this.initialized=!1;var e,n,r=this.cpt.attributes;if(r)for(var i in r)e=r[i],i.match(/^on/)?e.type?"callback"!==e.type&&(console.error("Attribute type 'callback' should be set to '"+i+"' instead of: "+e.type),e.type="callback"):console.error("Attribute type 'callback' should be set to '"+i+"'"):(n=e.binding,n?(n=a[n],void 0!==n?e._binding=n:(console.error("Invalid attribute binding value: "+e.binding),e._binding=0)):e._binding=0,e.type?"callback"===e.type?console.error("Attribute of type 'callback' must start with 'on' - please rename: "+i):void 0===o[e.type]&&(console.error("Invalid attribute type: "+e.type),e.type="string"):e.type="string")}else console.error("[CptWrapper] Invalid Component constructor!")},$dispose:function(){this._cptChgeCb&&(i.unobserve(this.cpt,this._cptChgeCb),this._cptChgeCb=null);var t=this.cpt;t&&t.$dispose&&(t.$dispose(),this.cpt=null),this.nodeInstance=null},init:function(t){if(!this.initialized){this.initialized=!0;var e=this.cpt,n=e.attributes;if(e){if(n){t||(t={});var r,s,a,h,l,c;for(var u in n)s=n[u],r=t[u],a="object"==typeof n[u],h=a&&n[u].type,h&&(c=o[s.type],c||(console.error("Invalid component attribute type: "+s.type),c=o.string)),"callback"!==s.type?("template"===s.type?l=null:(l="",void 0!==r?l=r:a?(l=s.defaultValue,void 0===l&&h&&(l=c.defaultValue)):l=s,h&&(l=c.convert(l,s))),e[u]=l):this.createEventFunction(u.slice(2))}e.$init&&e.$init(),this._cptChgeCb=this.onCptChange.bind(this),i.observe(e,this._cptChgeCb)}}},createEventFunction:function(t){var e=this;this.cpt["on"+t]=function(n){n||(n={}),n.type||(n.type=t),e.nodeInstance&&e.nodeInstance.onEvent&&e.nodeInstance.onEvent(n)}},onCptChange:function(t){var e=t,n=this.cpt;if(t.constructor===Array){if(!(t.length>0))return console.error("[CptNode] Invalid change - nbr of changes: "+t.length),void 0;e=t[0]}var r=e.name;if(""!==r){var i=!0;if(n.attributes){var s=n.attributes[r],a=void 0!==s;if(a){var h=s.type;if(h){var l=o[h].convert(e.newValue,s);e.newValue=l,n[r]=l}}a&&this.nodeInstance&&2===s._binding&&(e.newValue=this.cpt[r],this.nodeInstance.onAttributeChange(e)),a&&0===s._binding&&(i=!1)}if(i){if(this.processingChange===!0)return;this.processingChange=!0;try{var c=["on",r.charAt(0).toUpperCase(),r.slice(1),"Change"].join("");n[c]&&n[c].call(n,e.newValue,e.oldValue)}finally{this.processingChange=!1}}}}});t.exports.CptWrapper=h}),t("hsp/rt/$if.js",["hsp/klass","hsp/document","hsp/rt/tnode"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("hsp/document"),i=e("hsp/rt/tnode").TNode,s=n({$extends:i,$constructor:function(t,e,n,r){i.$constructor.call(this,t),this.isDOMless=!0,this.lastConditionValue=!1,this.isDOMempty=!0,this.condexpidx=e,n&&0!==n&&(this.children=n),r&&0!==r&&(this.children2=r)},createNodeInstance:function(t){var e=i.createNodeInstance.call(this,t),n=e.node;return e.TYPE="# if",e.node1=r.createComment("# if"),e.node2=r.createComment("# /if"),n.appendChild(e.node1),n.appendChild(e.node2),e.createChildNodeInstances(e.getConditionValue()),e},createChildNodeInstances:function(t){if(this.lastConditionValue=t,!this.isDOMempty){var e=this.childNodes;if(e){for(var n=0,i=e.length;i>n;n++)e[n].$dispose();delete this.childNodes}this.childNodes=null;for(var s,o=this.node,a=!1,h=this.node1,l=this.node2,n=o.childNodes.length-1;n>-1;n--)if(s=o.childNodes[n],a){if(s===h){n=-1;break}o.removeChild(s)}else s===l&&(a=!0);this.isDOMempty=!0}var s=t?this.children:this.children2;if(s){var c,i=s.length;if(i>0){this.childNodes=[];var u=r.createDocumentFragment();this.node=u;for(var n=0;i>n;n++)c=s[n].createNodeInstance(this),this.childNodes.push(c);this.replaceNodeBy(this.node,this.parent.node),this.node.insertBefore(u,this.node2),this.isDOMempty=!1}}},getConditionValue:function(){var t=!1;return this.eh&&(t=this.eh.getValue(this.condexpidx,this.vscope,!1)),t?!0:!1},refresh:function(){var t=this.getConditionValue();t!==this.lastConditionValue?(this.createChildNodeInstances(t),this.cdirty=!1):i.refresh.call(this)}});t.exports=s}),t("hsp/rt/$foreach.js",["hsp/klass","hsp/document","hsp/json","hsp/rt/tnode"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("hsp/document"),i=e("hsp/json"),s=e("hsp/rt/tnode").TNode,o=n({$extends:s,$constructor:function(t,e,n,r,i,o){this.isDOMless=!0,this.itemName=n,this.itemKeyName=e,this.forType=0,this.colExpIdx=i,t["e"+i][0]=1,s.$constructor.call(this,t),this.displayedCol=null,this.itemNode=new a(o,n,e)},$dispose:function(){s.$dispose.call(this),this.root&&this.displayedCol&&this.root.rmObjectObserver(this,this.displayedCol),this.displayedCol=null},createNodeInstance:function(t){var e=s.createNodeInstance.call(this,t);e.TYPE="# foreach";var n=e.node;e.node1=r.createComment("# foreach"),e.node2=r.createComment("# /foreach"),n.appendChild(e.node1);var i=e.eh.getValue(e.colExpIdx,e.vscope,null);return e.createChildNodeInstances(i,n),n.appendChild(e.node2),e},createChildNodeInstances:function(t,e){var n,r=this.forType,i=this.itemNode;if(t)if(this.root.createObjectObserver(this,t),this.displayedCol=t,this.childNodes=n=[],0===r&&t.constructor!==Array&&(r=1),0===r)for(var s=t.length,o=0,a=0;s>o;o++)null!=t[o]&&void 0!==t[o]&&(n.push(i.createNodeInstance(this,t[o],a,0===a,a===s-1,e)),a++);else console.log("[# foreach] for type on and of are not supported yet")},refresh:function(){if(this.adirty){var t=this.eh.getValue(this.colExpIdx,this.vscope,null);if(t!==this.displayedCol||null===this.childNodes||0===this.childNodes.length){this.root.rmObjectObserver(this,this.displayedCol),this.deleteAllItems();var e=r.createDocumentFragment();this.createChildNodeInstances(t,e),this.node.insertBefore(e,this.node2);for(var n=0,i=this.childNodes.length;i>n;n++)this.childNodes[n].replaceNodeBy(e,this.node)}else this.updateCollection(t);this.adirty=!1}s.refresh.call(this)},updateCollection:function(t){for(var e=[],n=this.itemName,i=this.childNodes.length,s=t.length,o=0;i>o;o++)e[o]=this.childNodes[o].vscope[n];for(var a,h,l,c=[],u=0,p=Math.max(i,s),o=0;i>o;o++)if(a=e[o],s>o)if(h=t[o],null!=h&&void 0!==h){if(a!==h)if(c[o]){this.childNodes.splice(o,0,c[o]),e.splice(o,0,c[o].vscope[n]),i+=1;var d=this.node2;i-1>o&&(d=this.childNodes[o+1].node1),c[o].attachDOMNodesBefore(d),c[o]=null}else if(l=t.indexOf(a,o),l>o?(c[l]=this.childNodes[o],this.childNodes[o].detachDOMNodes(u),this.childNodes.splice(o,1)):u=this.deleteItem(o,u,!1),e.splice(o,1),i-=1,l=e.indexOf(h,o),l>=o){if(l!=o){this.moveItem(l,o,u,!1);var f=e.splice(l,1);e.splice(o,0,f)}}else{var v=this.createItem(h,o,0===o,o===p-1,r.createDocumentFragment()),g=this.node2;this.childNodes[o+1]&&(g=this.childNodes[o+1].node1),this.node.insertBefore(v.node,g),v.replaceNodeBy(v.node,this.node),e.splice(o,0,h),i+=1}}else t.splice(o,1),c.splice(o,1),s-=1,p=Math.max(i,s),o-=1;else h=null,u=this.deleteItem(o,u,!1),e.splice(o,1),o-=1,i-=1;if(this.resyncItemScopes(0,s-1),s>i)for(var o=i;s>o;o++)if(h=t[o],null!=h&&void 0!==h)if(c[o])this.childNodes.splice(o,0,c[o]),c[o].attachDOMNodesBefore(this.node2),c[o].updateScope(o,0===o,o===p-1),c[o]=null;else{var v=this.createItem(h,o,0===o,o===p-1,r.createDocumentFragment());this.node.insertBefore(v.node,this.node2),v.replaceNodeBy(v.node,this.node)}else t.splice(o,1),c.splice(o,1),s-=1;c=null},deleteItem:function(t,e,n){var r=this.childNodes[t],i=0;return r&&(this.childNodes.splice(t,1),i=r.detachDOMNodes(e),r.$dispose(),n!==!1&&this.resyncItemScopes(t)),i},deleteAllItems:function(){if(this.node.childNodes)for(var t=this.node,e=!1,n=t.childNodes,r=n.length,i=this.node1,s=this.node2,o=0;r>o;o++){var a=n[o];if(a!==i){if(e){if(a===s)break;t.removeChild(a),o-=1,r-=1}}else e=!0}if(this.childNodes){for(var n=this.childNodes,o=0,r=n.length;r>o;o++)n[o].$dispose();this.childNodes=null}},moveItem:function(t,e,n,r){var i,s=this.childNodes,o=s.length;if(!(t===e||t>o-1||e>o-1)){var a=this.node2;o-1>e&&(a=s[e].node1),i=s[t],s.splice(t,1),i.detachDOMNodes(n),s.splice(e,0,i),i.attachDOMNodesBefore(a),r!==!1&&this.resyncItemScopes(Math.min(t,e))}},createItem:function(t,e,n,r,i){var s=this.itemNode.createNodeInstance(this,t,e,n,r,i);return this.childNodes.splice(e,0,s),s},resyncItemScopes:function(t,e){var n=this.childNodes.length;t||(t=0),void 0===e&&(e=n-1);for(var r=t;n>r;r++)this.childNodes[r].updateScope(r,0===r,r===e)}}),a=n({$extends:s,$constructor:function(t,e,n){s.$constructor.call(this,0),this.isDOMless=!0,this.itemName=e,this.itemKeyName=n,t&&0!==t&&(this.children=t),this.detachedNodes=null},$dispose:function(){s.$dispose.call(this),this.node1=null,this.node2=null,this.detachedNodes=null},createNodeInstance:function(t,e,i,o,a,h){var l=n.createObject(t.vscope),c=this.itemName;l["#scope"]=l,l[c]=e,l[this.itemKeyName]=i,l[c+"_isfirst"]=o,l[c+"_islast"]=a;var u=s.createNodeInstance.call(this,t);u.TYPE="# item";var p=u.node;if(u.vscope=l,u.node1=r.createComment("# item"),u.node2=r.createComment("# /item"),h&&(u.node=p=h),p.appendChild(u.node1),this.children){u.childNodes=[];for(var d=0,f=this.children.length;f>d;d++)u.childNodes[d]=this.children[d].createNodeInstance(u)}return p.appendChild(u.node2),u},detachDOMNodes:function(t){t||(t=0);var e=t;if(!this.node.childNodes)return e;var e,n,r=this.node,i=!1,s=r.childNodes.length,o=this.node1,a=this.node2;if(!this.detachedNodes){this.detachedNodes=[];for(var h=t;s>h;h++)if(n=r.childNodes[h],n===o&&(i=!0),i&&(this.detachedNodes.push(n),r.removeChild(n),h-=1,n===a)){e=h;break}return e}},attachDOMNodesBefore:function(t){if(this.detachedNodes){var e=this.detachedNodes,n=e.length;if(!t||!this.detachedNodes)return;for(var i=r.createDocumentFragment(),s=0;n>s;s++)i.appendChild(e[s]);t.parentNode.insertBefore(i,t)}this.detachedNodes=null},updateScope:function(t,e,n){var r=this.vscope,s=this.itemName;i.set(r,this.itemKeyName,t),i.set(r,s+"_isfirst",e),i.set(r,s+"_islast",n)}});t.exports=o}),t("hsp/gestures/touchEvent.js",[],function(t){function e(){var t={touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove"},e="ontouchstart"in window||window.DocumentTouch&&window.document instanceof window.DocumentTouch;return e||(t={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"}),window.navigator.msPointerEnabled&&(t={touchstart:"MSPointerDown",touchend:"MSPointerUp",touchmove:"MSPointerMove"}),t}function n(t){return t=t.toLowerCase(),o[t]||t}var r=(t.require,t.exports);t.filename,t.dirname;var i=r.touchEventMap=e();r.getPositions=function(t){var e=[];if(t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]){for(var n=0;n<t.touches.length;n++)e.push({x:t.touches[n].pageX?t.touches[n].pageX:t.touches[n].clientX,y:t.touches[n].pageY?t.touches[n].pageY:t.touches[n].clientY});if(t.type==i.touchend)for(var n=0;n<t.changedTouches.length;n++)e.push({x:t.changedTouches[n].pageX?t.changedTouches[n].pageX:t.changedTouches[n].clientX,y:t.changedTouches[n].pageY?t.changedTouches[n].pageY:t.changedTouches[n].clientY})}else e.push({x:t.pageX?t.pageX:t.clientX,y:t.pageY?t.pageY:t.clientY});return e},r.getFingerIndex=function(t){var e=0;if(window.navigator.msPointerEnabled)e=t.isPrimary?0:1;else if(t.touches||t.changedTouches)if(t.changedTouches.length>1)e=100+t.changedTouches.length;else if(t.type==i.touchend)e=t.touches.length+t.changedTouches.length-1;else for(var n=t.changedTouches[0].pageX?t.changedTouches[0].pageX:t.changedTouches[0].clientX,r=t.changedTouches[0].pageY?t.changedTouches[0].pageY:t.changedTouches[0].clientY,s=0;s<t.touches.length;s++)if(n==(t.touches[s].pageX?t.touches[s].pageX:t.touches[s].clientX)&&r==(t.touches[s].pageY?t.touches[s].pageY:t.touches[s].clientY)){e=s;break}return e};var s={target:"srcElement",type:"type",clientX:"clientX",clientY:"clientY",altKey:"altKey",ctrlKey:"ctrlKey",shiftKey:"shiftKey",pageX:"pageX",pageY:"pageY",relatedTarget:"relatedTarget",button:"button",direction:"direction",distance:"distance",duration:"duration",startX:"startX",startY:"startY",endX:"endX",endY:"endY",detail:"detail",wheelDelta:"wheelDelta",wheelDeltaX:"wheelDeltaX",wheelDeltaY:"wheelDeltaY",screenX:"screenX",screenY:"screenY",touches:"touches",changedTouches:"changedTouches",targetTouches:"targetTouches",isPrimary:"isPrimary"},o={focusin:"focus",focusout:"blur",dommousescroll:"mousewheel",webkitanimationstart:"animationstart",oanimationstart:"animationstart",msanimationstart:"animationstart",webkitanimationiteration:"animationiteration",oanimationiteration:"animationiteration",msanimationiteration:"animationiteration",webkitanimationend:"animationend",oanimationend:"animationend",msanimationend:"animationend",webkittransitionend:"transitionend",otransitionend:"transitionend",mstransitionend:"transitionend"};r.getFakeEvent=function(t,e){var r=window.navigator?window.navigator.userAgent.toLowerCase():"",i=r.indexOf("gecko")>-1,o=!1;if(/msie[\/\s]((?:\d+\.?)+)/.test(r)){var a=RegExp.$1,h=parseInt(a,10);if(h>=7){var l=window.document.documentMode||7;l!=h&&(h=l)}o=8>=h}var c={},u={type:t};if(o&&window.event){u=window.event;for(var p in s)s.hasOwnProperty(p)&&(c[p]=u[s[p]]);"mouseout"==u.type?c.relatedTarget=u.toElement:"mouseover"==u.type&&(c.relatedTarget=u.fromElement)}else for(var p in s)s.hasOwnProperty(p)&&(c[p]=u[p]);if(c.type=n(u.type),c.charCode=0,c.keyCode=0,"keydown"==c.type||"keyup"==c.type)c.keyCode=u.keyCode,c.isSpecialKey=c.isSpecialKey(this.keyCode,u);else if("keypress"==c.type){var d=u.keyCode||u.charCode,f=i&&u.keyCode;c.keyCode=d,f||(c.keyCode=d,d>32&&38>d&&(c.keyCode=d+16),d>41&&48>d&&(c.keyCode=d+64),d>47&&58>d&&(c.keyCode=d+48),d>96&&123>d&&(c.keyCode=d-32)),c.charCode=d,c.isSpecialKey=c.isSpecialKey(this.keyCode,u)}return c.hasStopPropagation=!1,c.hasPreventDefault=!1,c.preventDefault=u.preventDefault?function(t){c.hasPreventDefault=!0,u.preventDefault(),t===!0&&c.stopPropagation()}:function(t){c.hasPreventDefault=!0,u.returnValue=!1,t===!0&&c.stopPropagation()},c.stopPropagation=u.stopPropagation?function(){c.hasStopPropagation=!0,u.stopPropagation()}:function(){c.hasStopPropagation=!0,u.cancelBubble=!0},c._dispose=function(){u=null,c.preventDefault=null,c.stopPropagation=null},c.type=t,c.target=e,c}}),t("hsp/gestures/gesture.js",["hsp/klass","./touchEvent"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("./touchEvent"),i=n({NB_TOUCHES:1,$constructor:function(t,e){this.target=t,this.evthandler=e,this.touchEventMap=r.touchEventMap,this.eventsAlreadyAttached=!1,this.timerId=null,this.startData=null,this.currentData=null,this.callbackMap={},this._connectTouchEvents()},$dispose:function(){this._disconnectTouchEvents(),this.callbackMap=null},_connectTouchEvents:function(){if(!this.eventsAlreadyAttached){for(var t=this._getInitialListenersList(),e=0;e<t.length;e++)this._addListener(t[e].evt,t[e].cb);this.eventsAlreadyAttached=!0}},_disconnectTouchEvents:function(){for(var t=this._getInitialListenersList(),e=0;e<t.length;e++)this._removeListener(t[e].evt,t[e].cb);this.eventsAlreadyAttached=!1},_getInitialListenersList:function(){return[]},_getAdditionalListenersList:function(){return[]},_getFakeEventsMap:function(){return{}},_gestureStart:function(t,e){return this.__validateNbTouches(t)?(this._disconnectTouchEvents(),this.startData={positions:r.getPositions(t),time:(new Date).getTime()},this.currentData=null,this._connectAdditionalTouchEvents(),this._getFakeEventsMap().start?this._raiseFakeEvent(t,this._getFakeEventsMap().start,e):null!=t.returnValue?t.returnValue:!t.defaultPrevented):null},_gestureMove:function(t,e){return this.__validateNbTouches(t)?(this.currentData={positions:r.getPositions(t),time:(new Date).getTime()},this._getFakeEventsMap().move?this._raiseFakeEvent(t,this._getFakeEventsMap().move,e):null!=t.returnValue?t.returnValue:!t.defaultPrevented):null},_gestureEnd:function(t,e){return this.__validateNbTouches(t)?(this._disconnectAdditionalTouchEvents(),this._connectTouchEvents(),this.currentData={positions:r.getPositions(t),time:(new Date).getTime()},this._getFakeEventsMap().end?this._raiseFakeEvent(t,this._getFakeEventsMap().end,e):null!=t.returnValue?t.returnValue:!t.defaultPrevented):null},_gestureCancel:function(t,e){return this._disconnectAdditionalTouchEvents(),this._connectTouchEvents(),this.currentData={positions:r.getPositions(t),time:(new Date).getTime()},this._getFakeEventsMap().cancel?this._raiseFakeEvent(t,this._getFakeEventsMap().cancel,e):null!=t.returnValue?t.returnValue:!t.defaultPrevented},_connectAdditionalTouchEvents:function(){for(var t=this._getAdditionalListenersList(),e=0;e<t.length;e++)this._addListener(t[e].evt,t[e].cb)},_disconnectAdditionalTouchEvents:function(){for(var t=this._getAdditionalListenersList(),e=0;e<t.length;e++)this._removeListener(t[e].evt,t[e].cb)},_addListener:function(t,e){this.callbackMap[t]=e;var n=void 0!==this.target.addEventListener;if(!n){var r=this;this._attachEventFn=function(t){r.handleEvent(t)}}n?this.target.addEventListener(t,this,!1):this.target.attachEvent("on"+t,this._attachEventFn)},handleEvent:function(t){if(this.callbackMap[t.type]){var e=this.callbackMap[t.type];if(e)return e(t)}},_removeListener:function(t){this.callbackMap[t]=null;var e=void 0!==this.target.removeEventListener;e?this.target.removeEventListener(t,this,!1):this.target.detachEvent("on"+t,this._attachEventFn)},_raiseFakeEvent:function(t,e,n){var i=t.target?t.target:t.srcElement,s=r.getFakeEvent(e,i);t.returnValue||s.preventDefault(),t.cancelBubble&&s.stopPropagation(),s.pageX=t.pageX,s.pageY=t.pageY,s.clientX=t.clientX,s.clientY=t.clientY,s.touches=t.touches,s.changedTouches=t.changedTouches,s.isPrimary=t.isPrimary,this.startData&&this.startData.time&&(s.duration=(new Date).getTime()-this.startData.time),n||(n={}),n.startX=this.startData.positions[0].x,n.startY=this.startData.positions[0].y;var o=r.getPositions(t);return n.currentX=o[0].x,n.currentY=o[0].y,s.detail=n,this.evthandler.handleEvent(s),t.cancelBubble=s.hasStopPropagation,t.returnValue=!s.hasPreventDefault,t.returnValue},_calculateDistance:function(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))},__validateNbTouches:function(t){var e=r.getFingerIndex(t);return 1==this.NB_TOUCHES&&0===e||2==this.NB_TOUCHES&&e>=0}});t.exports.Gesture=i}),t("hsp/gestures/tap.js",["hsp/klass","./touchEvent","./gesture"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("./touchEvent"),i=e("./gesture").Gesture,s=n({$extends:i,MARGIN:10,_getInitialListenersList:function(){return[{evt:this.touchEventMap.touchstart,cb:this._tapStart.bind(this)}]},_getAdditionalListenersList:function(){return[{evt:this.touchEventMap.touchmove,cb:this._tapMove.bind(this)},{evt:this.touchEventMap.touchend,cb:this._tapEnd.bind(this)}]},_getFakeEventsMap:function(){return{start:"tapstart",end:"tap",cancel:"tapcancel"}},_tapStart:function(t){var e=this._gestureStart(t);return null==e?null!=t.returnValue?t.returnValue:!t.defaultPrevented:e},_tapMove:function(t){var e=r.getPositions(t);if(this.MARGIN>=this._calculateDistance(this.startData.positions[0].x,this.startData.positions[0].y,e[0].x,e[0].y)){var n=this._gestureMove(t);return null==n?this._gestureCancel(t):n}return this._gestureCancel(t)},_tapEnd:function(t){var e=this._gestureEnd(t);return null==e?this._gestureCancel(t):null!=t.returnValue?t.returnValue:!t.defaultPrevented}});t.exports.Tap=s}),t("hsp/gestures/gestures.js",["hsp/klass","./tap"],function(t){var e=t.require,n=t.exports;t.filename,t.dirname;var r=e("hsp/klass"),i=e("./tap").Tap,s={tap:{name:"Tap",klass:i},tapstart:{name:"Tap",klass:i},tapcancel:{name:"Tap",klass:i}};n.isGesture=function(t){return"undefined"!=typeof s[t]};var o=r({$constructor:function(){this.evtHandlers=[]},startGesture:function(t,e,n){var r=s[t];if("undefined"!=typeof r){for(var i=!1,o=0,a=this.evtHandlers.length;a>o;o++)if(this.evtHandlers[o].name===r.name){i=!0;break}i||this.evtHandlers.push({name:r.name,instance:new r.klass(e,n)})}},$dispose:function(){for(var t=0,e=this.evtHandlers.length;e>t;t++)this.evtHandlers[t].instance.$dispose();this.evtHandlers=null}});t.exports.Gestures=o}),t("hsp/rt/eltnode.js",["hsp/klass","hsp/document","hsp/rt/tnode","hsp/rt","hsp/gestures/gestures"],function(t){var e=t.require;t.exports,t.filename,t.dirname;var n=e("hsp/klass"),r=e("hsp/document"),i=e("hsp/rt/tnode").TNode,s=e("hsp/rt"),o=e("hsp/gestures/gestures"),a=n({$extends:i,$constructor:function(t,e,n,r,s){i.$constructor.call(this,e),this.tag=t,this.isInput="input"===this.tag,this.createAttList(n,r),s&&0!==s&&(this.children=s),this.gesturesEventHandlers=null},$dispose:function(){var t=this.evtHandlers,e=this.node;if(this.isInput&&(this.inputModelExpIdx=null),t)for(var n=void 0!==e.removeEventListener,r=0,s=t.length;s>r;r++)n?e.removeEventListener(t[r].evtType,this,!1):e.detachEvent("on"+t[r].evtType,this._attachEventFn);this.gesturesEventHandlers&&(this.gesturesEventHandlers.$dispose(),this.gesturesEventHandlers=null),this._attachEventFn=null,i.$dispose.call(this)},createNode:function(){this.TYPE=this.tag;var t;"svg"===this.tag&&(this.nodeNS="http://www.w3.org/2000/svg"),t=this.nodeNS?r.createElementNS(this.nodeNS,this.tag):r.createElement(this.tag),this.node=t,this.refreshAttributes();var e,n=this.evtHandlers,i=void 0!==t.addEventListener;if(n||this.isInput){if(!i){var s=this;this._attachEventFn=function(t){s.handleEvent(t)}}var a={};if(n)for(var h=0,l=n.length;l>h;h++)e=n[h],o.isGesture(e.evtType)?(null==this.gesturesEventHandlers&&(this.gesturesEventHandlers=new o.Gestures),this.gesturesEventHandlers.startGesture(e.evtType,t,this)):(a[e.evtType]=!0,i?t.addEventListener(e.evtType,this,!1):t.attachEvent("on"+e.evtType,this._attachEventFn));if(this.isInput){var c,u=["click","keydown","keyup"];for(var p in u)c=u[p],a[c]||(i?t.addEventListener(c,this,!1):t.attachEvent("on"+c,this._attachEventFn))}}},handleEvent:function(t){var e=this.evtHandlers,n=t.type,r=null;if(this.isInput&&this.inputModelExpIdx){var i=this.eh.getExpr(this.inputModelExpIdx);if(i.setValue){var o=this.node.value,a=this.node.type;"checkbox"===a&&(o=this.node.checked),this._lastValue=o,i.setValue(this.vscope,o),s.refresh()}}if(e)for(var h=0,l=e.length;l>h;h++)if(e[h].evtType===n){r=e[h].executeCb(t,this.eh,this.vscope);break}return r===!1&&t.preventDefault(),r},refresh:function(){this.adirty&&this.refreshAttributes(),i.refresh.call(this)},refreshAttributes:function(){var t,e,n=this.node,r=this.atts,i=this.eh,s=this.vscope,o=null;if(this.adirty=!1,r)for(var a=0,h=this.atts.length;h>a;a++)if(t=r[a],!this.isInput||this.inputModelExpIdx||"value"!==t.name&&"#model"!==t.name||t.textcfg&&2===t.textcfg.length&&""===t.textcfg[0]&&(o||(o=[]),o[t.name]=t.textcfg[1]),e=t.name,e.match(/^#/)){if("#model"===e)continue}else"class"===e?this.nodeNS?n.setAttribute("class",t.getValue(i,s,"")):n.className=t.getValue(i,s,""):"value"===e?this.isInput&&"radio"!==n.type||(n.value=t.getValue(i,s,"")):n.setAttribute(t.name,t.getValue(i,s,null));if(this.htmlCbs)for(var l,a=0,h=this.htmlCbs.length;h>a;a++)l=this.htmlCbs[a],n.setAttribute("on"+l.evtType,l.htmlCb);if(o){var c=o["#model"];c||(c=o.value),c&&(this.inputModelExpIdx=c)}if(this.inputModelExpIdx){var u=this.eh.getExpr(this.inputModelExpIdx),p=""+u.getValue(s,this.eh,"");if("radio"===n.type){var d=""+n.value;n.checked=p===d}else if("checkbox"===n.type){var d=""+n.checked;p!==d&&(n.checked=!n.checked)}else this._lastValue!==p&&(n.value=p),this._lastValue=null}}});t.exports=a}),t("hsp/rt.js",["hsp/es5","hsp/klass","hsp/rt/$root","hsp/rt/cptwrapper","hsp/rt/$text","hsp/rt/$if","hsp/rt/$foreach","hsp/rt/eltnode"],function(t){function e(t,e){v[t]=function(t,n,r,i,s,o){return new e(t,n,r,i,s,o)}}var n=t.require;t.exports,t.filename,t.dirname,n("hsp/es5");var r=n("hsp/klass"),i=n("hsp/rt/$root"),s=i.$RootNode,o=i.$InsertNode,a=i.$CptNode,h=n("hsp/rt/cptwrapper"),l=r({$constructor:function(t){this.nodedefs=t},process:function(t,e,n,r){var i,h={},l=[];if(e)for(var c=0,u=e.length;u>c;c+=2)i=e[c],h[i]=e[c+1],l.push(i);h["#scope"]=h;var p=null;return!t.$constructor||t.$constructor!==o&&t.$constructor!==a?p=new s(h,this.nodedefs,l,n,r):(p=t,p.init(h,this.nodedefs,l,n,r)),p}}),c=[],u=null,p=t.exports.refresh=function(){var t;for(u&&(clearTimeout(u),u=null);t=c.shift();)t.refresh()},d=function(){u=null,p()};p.addTemplate=function(t){var e=c.indexOf(t);0>e&&(c.push(t),u||(u=setTimeout(d,0)))},t.exports.display=function(t,e,n){if(e&&t){if(void 0===t.render||t.render.constructor!==Function)throw new Error("[hsp.display] Invalid argument: tplResult is not a valid template result");t.render(e,n)}},t.exports.template=function(t,e){var n=new l(null),r=[],s=0,o=!1,a=null;if(t.constructor===Array){s=t.length;for(var c=0;s>c;c++)r.push(t[c]),r.push(null)}else{o=!0,a=i.getObject(t.ctl);var u=null;if(null===a?u="Undefined component controller: "+t.ctl.slice(1).join("."):a.constructor!==Function&&(u="Component controller must be a function: "+t.ctl.slice(1).join(".")),u)throw console.error(u),u;r[0]=t.ref}var p=function(){var t=null,i=null;if(!n.nodedefs)try{n.nodedefs=e(v)}catch(l){throw l.constructor===ReferenceError?"Invalid reference: "+(l.message||l.description):l}if(o)t=new h.CptWrapper(a),this.isCptComponent&&(t.nodeInstance=this,t.cpt.nodeInstance=this),r[1]=t.cpt;else for(var c=0;s>c;c++)r[1+2*c]=arguments[c];return arguments.length>0&&(i=arguments[0]),n.process(this,r,t,i)};return p.isTemplate=!0,p.controllerConstructor=a,p
};var f=null;t.exports.useLogger=function(t){f||(f=[]),f.push(t)},t.exports.logErrors=function(t,e){var n=!0;if(f&&f.length)for(var r,i=f.length,s=0;i>s;s++)if(r=f[s](t,e),r===!1){n=!1;break}if(n)for(var o,a,h,l=e.length,s=0;l>s;s++)o=e[s],o.lineInfoTxt?h="\r\n>> "+o.lineInfoTxt.replace(/\r?\n/gi,"\r\n>> "):o.code&&(h="\r\n>> "+o.code),a=["Error in [",t,"]\r\n>> ",o.description,"(line: ",o.line,",column: ",o.column,")",h].join(""),console.error(a)};for(var v={},g=["$text",n("hsp/rt/$text"),"$if",n("hsp/rt/$if"),"$insert",o,"$foreach",n("hsp/rt/$foreach"),"elt",n("hsp/rt/eltnode"),"cpt",a],m=0,y=g.length;y>m;m+=2)e(g[m],g[m+1])})}}},errorContext:{main:"error.js",packaging:{baseUrl:"%scriptdir%/noderError/",requestConfig:{sync:!0}}}}});